<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Massage Appointment</title>

<style>
  :root{
    --bg1:#2a0000;
    --bg2:#000000;
    --red:#ff003d;
    --red2:#ff3b6f;
    --pink:#ff7aa2;
    --card1:#120000;
    --card2:#1a0000;
  }

  *{ box-sizing:border-box; }
  body{
    margin:0;
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    font-family:"Trebuchet MS",system-ui,-apple-system,Segoe UI,Roboto,Arial;
    background:radial-gradient(circle at top,var(--bg1),var(--bg2));
    overflow:hidden;
    color:#fff;
    padding:18px;
    -webkit-text-size-adjust:100%;
    touch-action:manipulation;
  }

  .glowBg{
    position:fixed;
    inset:-40vh;
    background:
      radial-gradient(circle at 20% 30%, rgba(255,0,61,.22), transparent 45%),
      radial-gradient(circle at 80% 20%, rgba(255,59,111,.18), transparent 45%),
      radial-gradient(circle at 50% 85%, rgba(255,122,162,.10), transparent 55%);
    filter: blur(22px);
    pointer-events:none;
    z-index:0;
  }

  .card{
    width:min(560px,100%);
    background:linear-gradient(145deg,var(--card1),var(--card2));
    border-radius:24px;
    padding:26px 22px 22px;
    text-align:center;
    position:relative;
    z-index:2;
    box-shadow:
      0 0 28px rgba(255,0,61,.35),
      0 0 70px rgba(255,0,120,.22),
      0 24px 80px rgba(0,0,0,.55);
    border:1px solid rgba(255,0,61,.18);
  }

  h1{
    margin:0 0 10px;
    font-size:clamp(22px,5vw,34px);
    color:var(--red2);
    text-shadow:0 0 14px rgba(255,0,61,.55);
    letter-spacing:.2px;
  }

  p{
    margin:0 0 16px;
    opacity:.92;
    color:#ffd6df;
    line-height:1.35;
  }

  .massageImg{
    width:100%;
    max-width:380px;
    border-radius:18px;
    margin:14px auto 18px;
    display:block;
    box-shadow:
      0 0 22px rgba(255,0,80,.55),
      0 22px 60px rgba(0,0,0,.65);
    border:1px solid rgba(255,0,61,.20);
  }

  .divider{
    height:1px;
    background: linear-gradient(90deg, transparent, rgba(255,0,61,.35), transparent);
    margin:10px 0 14px;
  }

  .timeWrap{
    margin:6px auto 10px;
    width:min(420px,100%);
    text-align:left;
  }
  .timeLabel{
    font-weight:950;
    color:#ffd6df;
    margin:0 0 10px;
    letter-spacing:.3px;
  }
  .timeOptions{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
  }
  .pill{
    border:1px solid rgba(255,122,162,.25);
    background: rgba(0,0,0,.35);
    color:#ffd6df;
    padding:12px 14px;
    border-radius:999px;
    cursor:pointer;
    font-weight:950;
    transition: transform .12s ease, background .12s ease, border-color .12s ease;
    user-select:none;
    -webkit-tap-highlight-color: transparent;
  }
  .pill:active{ transform: scale(.98); }
  .pill.selected{
    background: rgba(255,0,61,.22);
    border-color: rgba(255,0,61,.55);
    box-shadow: 0 0 18px rgba(255,0,61,.25);
  }

  .buttons{
    position:relative;
    height:110px;
    margin-top:10px;
  }

  button{
    border:none;
    border-radius:999px;
    padding:15px 22px;
    font-size:16px;
    font-weight:950;
    cursor:pointer;
    transition: transform .18s ease;
    -webkit-tap-highlight-color: transparent;
    user-select:none;
    touch-action:manipulation;
  }

  #yesBtn{
    background:linear-gradient(45deg,var(--red),var(--red2));
    color:#fff;
    position:absolute;
    left:40%;
    top:50%;
    transform:translate(-50%,-50%) scale(1);
    box-shadow:0 0 18px rgba(255,59,111,.55);
  }

  #noBtn{
    background:#0f0f0f;
    color:#bbb;
    position:absolute;
    left:60%;
    top:50%;
    transform:translate(-50%,-50%) scale(1);
    box-shadow:0 0 12px rgba(255,255,255,.08);
    border:1px solid rgba(255,255,255,.10);
  }

  .message{
    margin-top:18px;
    min-height:28px;
    font-size:17px;
    color:var(--pink);
    text-shadow:0 0 10px rgba(255,0,61,.35);
    font-weight:950;
  }

  .finalBox{
    display:none;
    margin-top:14px;
    padding:14px 14px 12px;
    border-radius:18px;
    background: rgba(0,0,0,.35);
    border:1px solid rgba(255,0,61,.20);
    box-shadow:0 0 24px rgba(255,0,61,.15);
    text-align:left;
  }
  .finalBox.show{
    display:block;
    animation:fadeIn .55s ease forwards;
  }
  .finalTitle{
    font-weight:1000;
    color:#ffd6df;
    margin:0 0 8px;
    letter-spacing:.2px;
  }
  .finalText{
    font-weight:900;
    color:#ffd6df;
    line-height:1.35;
    margin:0;
    opacity:.97;
    white-space:pre-line;
  }
  .bookingId{
    margin-top:10px;
    display:flex;
    gap:10px;
    align-items:center;
    padding:10px 12px;
    border-radius:14px;
    background: rgba(255,0,61,.12);
    border:1px solid rgba(255,0,61,.25);
    color:#ffd6df;
    font-weight:950;
    justify-content:space-between;
  }
  .bookingVal{
    letter-spacing:.8px;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
    max-width: 55%;
    text-align:right;
  }
  .copyBtn{
    border:1px solid rgba(255,255,255,.18);
    background: rgba(0,0,0,.35);
    color:#ffd6df;
    padding:8px 10px;
    border-radius:999px;
    cursor:pointer;
    font-weight:950;
    -webkit-tap-highlight-color: transparent;
  }
  .copyBtn:active{ transform: scale(.98); }

  @keyframes fadeIn{
    from{opacity:0; transform: translateY(8px) scale(.98);}
    to{opacity:1; transform: translateY(0) scale(1);}
  }

  .musicBtn{
    position:fixed;
    right:14px;
    bottom:14px;
    z-index:10;
    border:1px solid rgba(255,255,255,.18);
    border-radius:999px;
    padding:10px 12px;
    background: rgba(0,0,0,.45);
    color:#ffd6df;
    box-shadow: 0 14px 40px rgba(0,0,0,.35);
    font-weight:950;
    cursor:pointer;
    -webkit-tap-highlight-color: transparent;
  }

  @media (prefers-reduced-motion: reduce){
    *{ animation:none !important; transition:none !important; }
  }
</style>
</head>

<body>
<div class="glowBg"></div>

<audio id="bgMusic" src="music.mp3" loop preload="auto"></audio>
<button class="musicBtn" id="musicToggle" aria-label="Toggle music">üîà Music</button>

<div class="card">
  <h1>Anzia, would you like a massage appointment? üíÜ‚Äç‚ôÄÔ∏èüî•</h1>
  <p>February 14 ‚Ä¢ Candlelight ‚Ä¢ Slow hands ‚Ä¢ Deep relaxation üòå</p>

  <img class="massageImg" src="massage.jpg" alt="Massage vibe photo">

  <div class="divider"></div>

  <div class="timeWrap">
    <div class="timeLabel">Choose the time:</div>
    <div class="timeOptions" id="timeOptions">
      <div class="pill selected" data-time="Night üåô">Night üåô</div>
      <div class="pill" data-time="After Hours üî•">After Hours üî•</div>
    </div>
  </div>

  <div class="buttons">
    <button id="yesBtn" type="button">Yes üòç</button>
    <button id="noBtn" type="button">No üôà</button>
  </div>

  <div class="message" id="message"></div>

  <div class="finalBox" id="finalBox">
    <div class="finalTitle">Booking Confirmation</div>
    <p class="finalText" id="finalText"></p>

    <div class="bookingId" aria-label="Booking ID">
      <span>Booking ID:</span>
      <span id="bookingIdValue" class="bookingVal"></span>
      <button class="copyBtn" id="copyBtn" type="button">Copy</button>
    </div>
  </div>
</div>

<script>
  const yesBtn = document.getElementById("yesBtn");
  const noBtn = document.getElementById("noBtn");
  const message = document.getElementById("message");
  const finalBox = document.getElementById("finalBox");
  const finalText = document.getElementById("finalText");
  const timeOptions = document.getElementById("timeOptions");
  const bookingIdValue = document.getElementById("bookingIdValue");
  const copyBtn = document.getElementById("copyBtn");

  // Time selection
  let selectedTime = "Night üåô";
  timeOptions.addEventListener("click", (e) => {
    const pill = e.target.closest(".pill");
    if(!pill) return;
    [...timeOptions.querySelectorAll(".pill")].forEach(p => p.classList.remove("selected"));
    pill.classList.add("selected");
    selectedTime = pill.dataset.time;
  });

  // Music (needs a user gesture)
  const bgMusic = document.getElementById("bgMusic");
  const musicToggle = document.getElementById("musicToggle");
  let musicOn = false;

  function setMusicLabel(){
    musicToggle.textContent = (musicOn ? "üîä Music" : "üîà Music");
  }

  async function startMusic(){
    try{
      bgMusic.volume = 0.22;
      await bgMusic.play();
      musicOn = true;
      setMusicLabel();
    }catch(e){
      musicOn = false;
      setMusicLabel();
    }
  }

  window.addEventListener("pointerdown", async () => {
    if(musicOn) return;
    await startMusic();
  }, { once:true });

  musicToggle.onclick = async () => {
    if(!musicOn){
      await startMusic();
    }else{
      bgMusic.pause();
      musicOn = false;
      setMusicLabel();
    }
  };
  setMusicLabel();

  // ‚ÄúYou sure?‚Äù + YES grows
  let attempts = 0;
  const sureMessages = [
    "You sure? üòè",
    "Positive? üëÄ",
    "Think again‚Ä¶ üí≠",
    "I already lit the candles‚Ä¶ üïØÔ∏è",
    "Last chance to say no‚Ä¶ üòå"
  ];

  function vibrate(ms){
    if(navigator.vibrate) navigator.vibrate(ms);
  }

  function generateBookingId(){
    const chars = "ABCDEFGHJKMNPQRSTUVWXYZ23456789";
    let tail = "";
    for(let i=0;i<5;i++){
      tail += chars[Math.floor(Math.random()*chars.length)];
    }
    return `ANZ-0214-${tail}`;
  }

  function onNo(){
    attempts++;

    const scale = Math.min(1 + attempts * 0.18, 2.6);
    yesBtn.style.transform = `translate(-50%,-50%) scale(${scale})`;

    message.textContent = sureMessages[Math.min(attempts - 1, sureMessages.length - 1)];
    vibrate(25);

    if(attempts >= 6){
      noBtn.textContent = "Okay‚Ä¶ YES üò©";
      noBtn.style.background = "linear-gradient(45deg,#ff0040,#ff3366)";
      noBtn.style.color = "#fff";
      noBtn.onclick = onYes; // convert NO into YES
    }
  }

  function onYes(){
    message.textContent = "Perfect choice üòåüî•";

    bookingIdValue.textContent = generateBookingId();

    finalText.textContent =
`Thank you for choosing our services üòå
Your massage appointment is confirmed for
February 14 at ${selectedTime}.
We look forward to providing your relaxation experience. üíÜ‚Äç‚ôÄÔ∏èüî•`;

    finalBox.classList.add("show");

    // Make sure it becomes visible even if something weird happens
    finalBox.style.display = "block";

    // Scroll into view so you SEE it
    finalBox.scrollIntoView({ behavior: "smooth", block: "nearest" });

    yesBtn.style.display = "none";
    noBtn.style.display = "none";

    timeOptions.style.pointerEvents = "none";
    timeOptions.style.opacity = "0.95";

    vibrate(40);
  }

  // Use simple onclick for maximum reliability
  noBtn.onclick = onNo;
  yesBtn.onclick = onYes;

  // Copy Booking ID
  copyBtn.onclick = async () => {
    const text = bookingIdValue.textContent || "";
    try{
      await navigator.clipboard.writeText(text);
      copyBtn.textContent = "Copied!";
      setTimeout(()=> copyBtn.textContent = "Copy", 1200);
    }catch(e){
      message.textContent = "Copy not supported here ‚Äî Booking ID: " + text;
    }
  };
</script>

</body>
</html>
